openapi: 3.0.3
info:
  title: WASAText
  description: |
    API for the WASAText application, which is the project for the WASA course @ Sapienza
  version: 0.0.1

components:
  schemas:
    user:
      $ref: "./schemas/user.yaml"

    message:
      $ref: "./schemas/message.yaml"

    reaction:
      $ref: "./schemas/reaction.yaml"

    chat:
      $ref: "./schemas/chat.yaml"
  

paths:
  /session:
    # POST = doLogin
    post:
      tags: ["User operations", "Login"]
      summary: Logs in the user
      description: |
        If the user does not exist, it will be created,
        and an identifier is returned.
        If the user exists, the user identifier is returned.
      operationId: doLogin
      requestBody:
        description: User details
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/user"
        required: true
      
      responses:
        '200':
          description: |
            The user exists. Proceed to log in
          
        '201':
          description: |
            The user didn't exist, but got created. Proceed to log in
